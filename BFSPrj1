import java.util.ArrayList;
import java.util.Comparator;
import java.util.PriorityQueue;
import java.util.Scanner;

public class BestFirstSearch {

    public static myNode search(int numDucks, int numPos, int flagDuck, int maxEnergy) {
        ArrayList<myNode> reached = new ArrayList<>();
        ArrayList<Duck> allDucks = new ArrayList<>();
        int i = 0;
        Duck newDuck = new Duck(0, maxEnergy, maxEnergy, false);
        Duck goalDuck = new Duck(0, maxEnergy, maxEnergy, true);
        while (i < numDucks) {
            if (i != flagDuck) {
                allDucks.add(newDuck);
            } else {
                allDucks.add(goalDuck);
            }
            i++;
        }
        int cost = 0;
        myNode initNode = new myNode(allDucks, null, cost);
        if (initNode.isGoalNode(flagDuck, numPos)) {
            System.out.println("Goal found");
            return initNode;
        }

        PriorityQueue<myNode> frontier = new PriorityQueue<>(Comparator.comparingInt(myNode::getHeuristicValue));
        myNode clone = initNode.cloneNode(initNode);
        reached.add(clone);
        frontier.add(clone);
        while (!frontier.isEmpty()) {
            myNode newNode = frontier.poll();

            for (myNode x : newNode.expand(newNode, newNode.getDucks(), numPos)) {
                if (x.isGoalNode(flagDuck, numPos)) {
                    System.out.println(x.traceMoves());
                    return x;
                }
                if (!reached.contains(x)) {
                    reached.add(x);
                    frontier.add(x);
                }
            }
        }
        return null;
    }

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.print("Enter the number of ducks: ");
        int numDucks = scanner.nextInt();
        System.out.print("Enter the number of positions: ");
        int numPos = scanner.nextInt();
        System.out.print("Enter the flag duck: ");
        int flagDuck = scanner.nextInt();
        System.out.print("Enter the maximum energy: ");
        int maxEnergy = scanner.nextInt();

        myNode x = search(numDucks, numPos, flagDuck, maxEnergy);
        if (x == null) {
            System.out.println("No solution found");
        } else {
            System.out.println(x.toString());
        }

        scanner.close();
    }
}
